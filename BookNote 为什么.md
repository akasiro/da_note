干预：随机实验；do算子（用观察数据估测干预效果）

# 混杂因子（Confounding Effect）
混杂定义为任何使$P（Y|do（X））$不同于$P（Y|X）$的因素。
do算子会清除指向X的所有箭头，这样它就可以防止有关X的任何信息在非因果方向流动。随机化处理也具有相同的效果

# 3条信息流通的规则
（a）在链接合A→B→C中，控制B可防止有关A的信息流向C或有关C的信息流向A。

（b）同样，在叉接合或混杂接合A←B→C中，控制B可以防止有关A的信息流向C，或有关C的信息流向A。

（c）最后，在对撞接合A→B←C中，信息流通规则与前两种是完全相反的。变量A和C原本是独立的，所以关于A的信息不能告诉你任何关于C的信息。但是，如果你控制了B，由于辩解效应的存在，信息就会开始在“管道”中流通。”

（d）控制一个变量的后代节点（或替代物）就如同“部分地”控制变量本身。控制一个中介物的某个后代节点意味着部分地关闭了信息管道；控制一个对撞变量的某个后代节点则意味着部分地打开了信息管道。

# 后门路径(back-door path)
+ 定义：所有X和Y之间以指向X的箭头为开始的路径
+ 举例：图中X到Y的路径有
	+ 路径1：X←A→B←D→E→Y
	+ 路径2：$X \rightarrow E \rightarrow Y$
	+ 路径1就是后门路径（非因果路径）
	+ ![[后门路径举例.png]]
+ 只有阻断后门路径（因为这些路径允许X和Y之间的伪相关关系在管道中流通）而不去阻断或者干扰所有的因果路径，就完成了对X和Y的去混杂
+ 如果我们试图通过控制某一组变量Z来实现这一点，那么我们还需要确保Z的任何成员都不是X的后代，否则我们就可能部分或完全地关闭这条X与Y之间的因果路径。

# 后门调整

+ 公式：$P(Y|do(X)) = \sum_{Z}P(Y|X,Z=z)P(Z=z)$
	+ Z代表阻断后门路径的变量集
	+ 

# 前门调整(front-door adjustment)
+ 背景：因缺乏必要的数据而无法阻断某条后门路径
+ 公式：$P(Y|do(X)) = \sum_{Z}P(Z=z,X)\sum_{X}P(Y|X=x,Z=z)P(X=x)$
	+ Z代表直接因果路径的的中介变量（完全中介），例如图中的焦油沉积
	+ ![[前门调整举例.png]]
	+ ![[前门准则推导.png]]
	+ 我的理解
		+ $\sum_{X}P(Y|X=x,Z=z)P(X=x)$:代表焦油沉积与癌症的因果效应。控制住吸烟（X)就阻断了，$焦油沉积（Z) \rightarrow 癌症（Y)$ 的后门

# do变化规则（干预）
+ **规则1**：
	+ $P(Y|do(X),Z,W) = P(Y|do(X),X)$
	+ 条件：
		+ W与Y无关（其前提可能是以其他变量Z为条件）
	+ 图示：
		+ $火灾(W) \rightarrow 烟雾(Z) \rightarrow 警报(Y)$
		+ Z 阻断了W到Y的路径
	+ 解释：规则1允许增加或删除某个观察结果
+ **规则2**：
	+ $P(Y|do(X), Z) = P(Y|X,Z)$
	+ 条件：
		+ 如果变量集Z阻断了从X到Y的所有后门路径，那么控制Z则do(X)=X
	+ 解释：规则2允许用观察替代干预
+ **规则3**：
	+ $P(Y|do(X)) = P(Y)$
	+ 条件：
		+ 如果X到Y没有因果路径
	+ 解释：规则3允许删除或添加干预